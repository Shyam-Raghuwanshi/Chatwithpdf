ðŸ“‚ Database: chatbot_app (Updated with detailed token tracking)

1. UserProfile Collection

Attributes:

userId â†’ String (size: 36, required) â€“ store Appwrite User ID

plan â†’ Enum (free, pro, enterprise), required, default = free

tokensUsed â†’ Integer, required, default = 0

inputTokensUsed â†’ Integer, optional, default = 0 (NEW FIELD)

outputTokensUsed â†’ Integer, optional, default = 0 (NEW FIELD)

tokensLimit â†’ Integer, required, default = 400000

subscriptionValidTill â†’ Datetime, optional

createdAt â†’ Datetime, required

updatedAt â†’ Datetime, required

2. Documents Collection (unchanged)

Attributes:

userId â†’ String (size: 36, required)

title â†’ String (size: 255, required)

embeddingId â†’ String (size: 64, optional) â€“ useful if you create embeddings with an external service

createdAt â†’ Datetime, required

3. Chats Collection

Attributes:

userId â†’ String (size: 36, required)

documentId â†’ String (size: 36, optional)

message â†’ String (size: 2000, required)

response â†’ String (size: 4000, required)

tokensUsed â†’ Integer, required

inputTokens â†’ Integer, optional (NEW FIELD - tracks input/prompt tokens)

outputTokens â†’ Integer, optional (NEW FIELD - tracks output/completion tokens)

createdAt â†’ Datetime, required

4. Plans Collection (unchanged)

Attributes:

name â†’ String (size: 50, required)

price â†’ Integer, required (â‚¹ in paisa/cents for precision, e.g., â‚¹1000 = 100000)

tokensLimit â†’ Integer, required

durationDays â†’ Integer, required

---

MIGRATION NOTES:

To upgrade your existing database:
1. Add `inputTokensUsed` (Integer, optional) to UserProfile collection
2. Add `outputTokensUsed` (Integer, optional) to UserProfile collection  
3. Add `inputTokens` (Integer, optional) to Chats collection
4. Add `outputTokens` (Integer, optional) to Chats collection

These fields are optional, so existing records will continue to work.
The new detailed tracking will only apply to new chat interactions.
